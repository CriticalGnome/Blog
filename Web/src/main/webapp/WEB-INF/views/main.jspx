<jsp:root version="2.0"
          xmlns="http://www.w3.org/1999/xhtml"
          xmlns:jsp="http://java.sun.com/JSP/Page"
          xmlns:c="http://java.sun.com/jsp/jstl/core"
          xmlns:spring="http://www.springframework.org/tags"
          xmlns:sec="http://www.springframework.org/security/tags">
    <jsp:output omit-xml-declaration="true"/>
    <jsp:directive.page pageEncoding="UTF-8" contentType="text/html; UTF-8"/>

    <div class="container">
        <div class="col-md-9">
            <!--@elvariable id="records" type="java.util.List"-->
            <!--@elvariable id="record" type="com.criticalgnome.blog.entities.Record"-->
            <c:forEach items="${records}" var="record">
                <div class="row">
                    <div class="panel panel-default">
                        <div class="panel-heading">
                            <h3 class="panel-title"><b>${record.header}</b></h3>
                            <p><small>${record.createdAt}</small></p>
                            <div class="btn-group btn-group-xs" role="group"  aria-label="...">
                                <sec:authorize access="hasAnyRole('ROLE_ADMINISTRATOR','ROLE_EDITOR')">
                                    <button type="button" class="btn btn-default"  onclick="location.href='${pageContext.request.contextPath}/records/edit/${record.id}';"><spring:message code="main.button.edit"/></button>
                                </sec:authorize>
                                <sec:authorize access="hasAnyRole('ROLE_ADMINISTRATOR','ROLE_EDITOR','ROLE_MODERATOR')">
                                    <button type="button" class="btn btn-default"  onclick="location.href='${pageContext.request.contextPath}/records/delete/${record.id}';"><spring:message code="main.button.delete"/></button>
                                </sec:authorize>
                            </div>
                        </div>
                        <div class="panel-body">
                            <h6><b><spring:message code="main.label.category"/>: <a href="${pageContext.request.contextPath}/categories/${record.category.id}">${record.category.name}</a></b></h6>
                            ${record.body}
                            <br/>
                            <hr/>
                            <c:forEach items="${record.tags}" var="tag">
                                <a href="${pageContext.request.contextPath}/tags/${tag.id}"><span class="badge">${tag.name}</span></a>
                            </c:forEach>
                        </div>
                        <div class="panel-footer">
                            <small>
                                <spring:message code="main.label.author"/>: <a href="${pageContext.request.contextPath}/users/${record.author.id}">${record.author.nickName}</a>
                            </small>
                        </div>
                    </div>
                </div>
            </c:forEach>
        </div>
        <div class="col-md-3">
            <div class="panel panel-default">
                <div class="panel-heading"><h3 class="panel-title"><b><spring:message code="main.box.name.categories"/></b></h3></div>
                <div class="panel-body">Panel text</div>
            </div>
            <div class="panel panel-default">
                <div class="panel-heading"><h3 class="panel-title"><b><spring:message code="main.box.name.calendar"/></b></h3></div>
                <div class="panel-body">Panel text</div>
            </div>
            <div class="panel panel-default">
                <div class="panel-heading"><h3 class="panel-title"><b><spring:message code="main.box.name.tags"/></b></h3></div>
                <div class="panel-body">Panel text</div>
            </div>
        </div>
    </div>

</jsp:root>
